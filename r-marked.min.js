/**
 * r-marked.js - This is a web component based on x-tags/Brick for rendering Markdown content directly into a page.
 * @author R. S. Doiel, <rsdoiel@gmail.com>
 * copyright (c) 2014
 * All Rights Reserved.
 * @license Released under the BSD 2-Clause License.
 */
!function(){"use strict";function httpGET(url,callback,progress){var request;if(window.XMLHttpRequest)request=new XMLHttpRequest;else if("undefined"!=typeof XDomainRequest)request=new XDomainRequest;else if("undefined"!=typeof window.ActiveXObject)try{request=new ActiveXObject("Msxml2.XMLHTTP")}catch(err1){try{request=new ActiveXObject("Microsoft.XMLHTTP")}catch(err2){throw err2}}return request?("undefined"!=typeof callback&&(request.onreadystatechange=function(){if("undefined"!=typeof progress)switch(request.readyState){case 0:progress("uninitialized",request);break;case 1:progress("loading",request);break;case 2:progress("loaded",request);break;case 3:progress("interactive",request);break;case 4:progress("complete",request),200===request.status?callback(null,request.responseText):callback({status:request.status,error:"http request failed"},request.responseText)}}),request.open("GET",url),request.send(),request):("undefined"!=typeof callback&&callback("Can't create request object"),!1)}function resolveURL(doc_url,href){var last_slash=doc_url.lastIndexOf("/");return-1===href.indexOf("://")?-1===last_slash?doc_url+"/"+href:doc_url.substring(0,last_slash)+"/"+href:href}function loadContent(elem,url){httpGET(url,function(err,data){return err?void console.error("ERROR",err):void("undefined"==typeof marked?elem.innerHTML="<pre>"+data+"</pre>":marked(data,function(err,content){elem.innerHTML=content}))},function(status){xtag.fireEvent(elem,"readyState",{detail:{status:status}})})}xtag.register("r-marked",{lifecycle:{created:function(){"undefined"!=typeof this.href&&this.href&&loadContent(this,resolveURL(document.URL,this.href))},attributeChanged:function(){"undefined"!=typeof this.href&&this.href&&loadContent(this,resolveURL(document.URL,this.href))}},accessors:{href:{attribute:{url:""}}}})}();